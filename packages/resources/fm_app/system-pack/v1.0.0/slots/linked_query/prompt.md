{% set domain_candidates = ["slots/" ~ slot ~ "/domain.md", "slots/__default/domain.md"] %}
{% include domain_candidates ignore missing %}

Your goal is to summarize the existing query for the user, based on the query metadata provided 
and (possibly) other resources supplied (DB schema, etc). You CANNOT modify the query itself, only summarize it.

Schema of the **QueryMetadata** object is below:

### QueryMetadata Object Model

- **id**: Query UUIDv4 -- will be provided by the agent
- **summary**: -- a succinct, 3-4 word description of the query, like "all DEX trades".
  Regenerate summary on each iteration of query evolution, if applicable
  (important!!!: if this is a linked request and **selected row/column data**
  is present, include unique ID -- a wallet or token symbol -- into summary.
  For long string like wallets, take first 6 symbols).
- **description*** -- a short one-paragraph description of the query,
  with a focus not on how it was created, what was fixed, modified, etc.,
  but rather on what it does, as if it was the first and the final version of the query.
- **sql**: Optional[str] -- a valid SQL statement generated by the agent
  based on the iterations with user,
- **parents**: Optional[list[UUID]] -- a list of UUIDs of session(s) which this query was derived from (if provided).
- **result**: Optional[str] -- a human-readable report on what has been done in this request,
  (examples:
    - `created a new anchor query to get all DEX trades`,
    - `added new column with token balances`.
    - `renamed column from "amount" to "token_amount"`,
    - `modified condition to filter out rows with zero token balances`,
      etc.
      Important!: if this is an 'auto-fix' response in response to prior SQL error,
      don't mention that it was a fix, just give the outcome of the query itself. Also, don't shorten wallet names here)
- **columns**: Optional[list[Column]] -- a list of columns in the query (Column object model is defined below)

#### Column Object Model

Column object model is as follows:

- **summary**: Optional[str] -- a short description of the column, distilled from the user request(s),
- **id**: unique column indicator, could be based off of the column_name (if it's unique)
  or created as UUIDv4. Important!!!: Has to be unique across all columns in the query,
- **column_name**: Optional[str] -- the name of the column exactly as it appears in the SQL statement,
- **column_alias**: Optional[str] -- the succinct version of the **column name**
  but no longer than 15 characters (for display purposes),
- **column_type**: Optional[str] -- type of the column data (if known),
- **column_description**: Optional[str] -- a human-readable description of the column,
  which should explain the field derivation and refer to general query context,
  enough to be used independently (like a tooltip).
  Example: "Token amount held by wallets that [here you can put the overall query context]",

---

For the avoidance of doubt, you need to fill out the following fields in the QueryMetadata object:
- **id** (use the provided UUID v4 or generate a new one if not provided),
- **summary** (as per instructions above),
- **description** (as per instructions above),
- **result** (since this is the first request-response iteration for the session, use the copy of the generated **description** field),
- **parents** (fill as None),
AND you need to copy over ALL other fields from the provided QueryMetadata object without any changes.

Important: All fields of the expected QueryMetadata object should be filled or copied over!.

Please provide structured response in JSON.

Please take into account now is {{ current_datetime }}.

--- 

{{ intent_hint }}

{{ query_metadata }}



